<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Foxy Host Panel</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
/* Layout */
:root { --bg: #0b0b0b; --panel: #000; --accent: #0f0; --muted: #3a3a3a; }
html,body { height: 100%; margin: 0; font-family: monospace; background: var(--bg); color: var(--accent); }
.app { display: flex; height: 100vh; }
.sidebar { width: 300px; background: var(--panel); border-right: 1px solid var(--accent); padding: 12px; box-sizing: border-box; overflow-y: auto; }
.brand { font-size: 20px; margin-bottom: 12px; }
.section { margin-top: 10px; }
.sectionTitle { cursor: pointer; padding: 6px 4px; font-weight: bold; }
.list { margin-left: 8px; display: none; }
.item { padding: 6px 4px; cursor: pointer; }
.item:hover { text-decoration: underline; }
.badge { font-size: 12px; color: var(--muted); }
.content { flex: 1; display: flex; flex-direction: column; padding: 12px; box-sizing: border-box; overflow: hidden; }
.topbar { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
.controls { display: flex; gap: 8px; align-items: center; }
.btn { background: transparent; border: 1px solid var(--accent); color: var(--accent); padding: 6px 10px; cursor: pointer; }
.main { display: flex; gap: 12px; height: calc(100% - 56px); overflow: hidden; }
.leftCol { width: 55%; display: flex; flex-direction: column; gap: 12px; overflow: hidden; }
.rightCol { flex: 1; display: flex; flex-direction: column; gap: 12px; overflow: hidden; }
.panel { background: var(--panel); border: 1px solid var(--accent); padding: 10px; box-sizing: border-box; overflow: auto; }
.console { height: 260px; background: #000; padding: 8px; overflow-y: auto; border: 1px solid var(--accent); }
.input { width: 100%; padding: 8px; background: #000; color: var(--accent); border: 1px solid var(--accent); box-sizing: border-box; }
.fileView { white-space: pre-wrap; min-height: 220px; background: #000; border: 1px solid var(--accent); padding: 8px; overflow: auto; }
.editor { height: 300px; background: #000; border: 1px solid var(--accent); padding: 8px; color: var(--accent); overflow: auto; }
.small { font-size: 13px; }
.row { display: flex; gap: 8px; align-items: center; }
.col { display: flex; flex-direction: column; gap: 6px; }
.seek { width: 120px; }
.accountBox { border: 1px dashed var(--accent); padding: 8px; }
.pluginRow { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; border-bottom: 1px solid rgba(15,255,15,0.05); }
.pluginActions { display: flex; gap: 6px; }
.note { color: var(--muted); font-size: 13px; }
.footer { font-size: 12px; color: var(--muted); text-align: center; padding: 6px 0; }
</style>
</head>
<body>
<div class="app">
  <div class="sidebar" id="sidebar">
    <div class="brand">Foxy Host</div>

    <div class="section">
      <div class="sectionTitle" data-target="filesList">Files <span class="badge">explore server files</span></div>
      <div class="list" id="filesList">
        <div class="item" onclick="openFile('server.properties')">server.properties</div>
        <div class="item" onclick="openFile('plugins.yml')">plugins.yml</div>
        <div class="item" onclick="openFile('whitelist.json')">whitelist.json</div>
        <div class="item" onclick="openFile('ops.json')">ops.json</div>
        <div class="item" onclick="openFile('world/level.dat')">world/level.dat</div>
        <div class="item" onclick="openFile('logs/latest.log')">logs/latest.log</div>
      </div>
    </div>

    <div class="section">
      <div class="sectionTitle" data-target="pluginsList">Plugins <span class="badge">manage plugins</span></div>
      <div class="list" id="pluginsList">
        <div class="item" onclick="openPlugin('Essentials')">Essentials</div>
        <div class="item" onclick="openPlugin('LuckPerms')">LuckPerms</div>
        <div class="item" onclick="openPlugin('WorldEdit')">WorldEdit</div>
        <div class="item" onclick="openPlugin('Geyser')">Geyser</div>
        <div class="item" onclick="openPlugin('Vault')">Vault</div>
        <div class="item" onclick="openPlugin('Dynmap')">Dynmap</div>
      </div>
    </div>

    <div class="section">
      <div class="sectionTitle" data-target="accountList">Account <span class="badge">user tools</span></div>
      <div class="list" id="accountList">
        <div class="item" onclick="showAccount()">Profile</div>
        <div class="item" onclick="showCredits()">Credits</div>
        <div class="item" onclick="showSubscriptions()">Subscriptions</div>
        <div class="item" onclick="showBilling()">Billing</div>
      </div>
    </div>

    <div class="section">
      <div class="sectionTitle" data-target="subdomainsList">Subdomains <span class="badge">buy and map</span></div>
      <div class="list" id="subdomainsList">
        <div class="item" onclick="openSubdomainManager()">Manage subdomains</div>
        <div class="item" onclick="openMapping()">Map ip or change port</div>
        <div class="item" onclick="viewMappings()">View all mappings</div>
      </div>
    </div>

    <div class="section">
      <div class="sectionTitle" data-target="toolsList">Tools <span class="badge">backups, tasks</span></div>
      <div class="list" id="toolsList">
        <div class="item" onclick="openBackup()">Backups</div>
        <div class="item" onclick="openScheduler()">Scheduler</div>
        <div class="item" onclick="openLogs()">Server logs</div>
        <div class="item" onclick="openHelp()">Help</div>
      </div>
    </div>

    <div style="margin-top:12px;" class="note">Tip: Click section title to expand</div>

  </div>

  <div class="content">
    <div class="topbar">
      <div class="row">
        <div class="small">Server: <strong id="serverName">Foxy-1</strong></div>
        <div style="width:12px"></div>
        <div class="note">Status: <span id="serverStatus">offline</span></div>
      </div>
      <div class="controls">
        <button class="btn" onclick="serverAction('start')">Start</button>
        <button class="btn" onclick="serverAction('stop')">Stop</button>
        <button class="btn" onclick="serverAction('restart')">Restart</button>
      </div>
    </div>

    <div class="main">
      <div class="leftCol">

        <div class="panel">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">
            <div>Console</div>
            <div class="note">Live</div>
          </div>
          <div id="console" class="console"></div>
          <input id="consoleInput" class="input" placeholder="tasteaza comanda si apasa enter" onkeydown="consoleKey(event)">
        </div>

        <div class="panel">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">
            <div>File editor</div>
            <div class="note">editeaza si salveaza local</div>
          </div>
          <div id="currentFile" class="note">Niciun fisier selectat</div>
          <div id="editor" class="editor" contenteditable="true">Selecteaza un fisier sau creeaza unul nou</div>
          <div style="margin-top:8px;display:flex;gap:8px;">
            <button class="btn" onclick="saveFile()">Save</button>
            <button class="btn" onclick="downloadFile()">Download</button>
            <button class="btn" onclick="createFile()">New file</button>
            <button class="btn" onclick="deleteFile()">Delete</button>
          </div>
        </div>

      </div>

      <div class="rightCol">

        <div class="panel">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <div>Plugins</div>
            <div class="note">install, update, toggle</div>
          </div>
          <div id="pluginsPanel">
            <!-- plugin rows inserted here -->
          </div>
          <div style="margin-top:8px;display:flex;gap:8px;align-items:center;">
            <input id="uploadPluginInput" type="text" placeholder="plugin name" class="input seek">
            <button class="btn" onclick="installPlugin()">Install</button>
            <button class="btn" onclick="scanPlugins()">Scan</button>
          </div>
        </div>

        <div class="panel">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <div>Account</div>
            <div class="note">manage credits</div>
          </div>
          <div class="accountBox">
            <div>Username: <strong id="acctName">guest</strong></div>
            <div>Credits: <strong id="acctCredits">100</strong></div>
            <div style="margin-top:8px;display:flex;gap:8px;">
              <input id="addCreditsInput" placeholder="amount" class="input seek">
              <button class="btn" onclick="addCredits()">Add</button>
              <button class="btn" onclick="buyCredits()">Buy</button>
            </div>
            <div style="margin-top:8px;">
              <button class="btn" onclick="openSubdomainManager()">Manage subdomains</button>
              <button class="btn" onclick="openBackup()">Backups</button>
            </div>
          </div>
        </div>

        <div class="panel">
          <div>Subdomain manager</div>
          <div style="margin-top:8px;display:flex;gap:8px;align-items:center;">
            <input id="subInput" placeholder="nume subdomeniu" class="input" style="width:180px">
            <select id="subType" class="input" style="width:140px">
              <option value="root">nume.ro</option>
              <option value="mc">mc.nume.ro</option>
            </select>
            <input id="subIp" placeholder="ip:port" class="input seek" style="width:160px">
            <button class="btn" onclick="purchaseSubdomain()">Purchase</button>
          </div>
          <div id="subList" style="margin-top:8px;max-height:160px;overflow:auto;background:#000;padding:6px;border:1px solid var(--accent);"></div>
        </div>

      </div>

    </div>

    <div class="footer">Foxy Host panel, demo local, features simulated</div>
  </div>
</div>

<script>
// Utility and storage
const state = {
  files: {},
  plugins: {},
  account: { name: 'guest', credits: 100 },
  subdomains: {},
  server: { status: 'offline', players: 0 }
};

// Init demo content
function seed() {
  state.files['server.properties'] = 'motd=Foxy Server\nmax-players=20\nserver-ip=127.0.0.1\nserver-port=25565';
  state.files['whitelist.json'] = JSON.stringify([{ name: 'player1' }], null, 2);
  state.files['ops.json'] = JSON.stringify([{ uuid: '0000', name: 'admin' }], null, 2);
  state.files['logs/latest.log'] = '2025-01-01 Server start\n2025-01-02 Backup created';
  state.plugins = {
    'Essentials': { enabled: true, version: '2.18.1' },
    'LuckPerms': { enabled: true, version: '5.3' },
    'WorldEdit': { enabled: false, version: '7.2.0' }
  };
  state.subdomains['guest'] = { type: 'root', target: '127.0.0.1:25565', purchased: true };
  renderPlugins();
  renderSubList();
  saveState();
}

function saveState() { localStorage.setItem('foxy_state', JSON.stringify(state)); }
function loadState() { const s = localStorage.getItem('foxy_state'); if(s) Object.assign(state, JSON.parse(s)); }

// Sidebar toggle
document.querySelectorAll('.sectionTitle').forEach(el => {
  el.addEventListener('click', () => {
    const id = el.getAttribute('data-target');
    const list = document.getElementById(id);
    list.style.display = list.style.display === 'block' ? 'none' : 'block';
  });
});

// Console
const consoleEl = document.getElementById('console');
function logConsole(t) { const d = document.createElement('div'); d.textContent = '['+ new Date().toLocaleTimeString()+'] ' + t; consoleEl.appendChild(d); consoleEl.scrollTop = consoleEl.scrollHeight; }
function consoleKey(e) { if(e.key === 'Enter') { const v = e.target.value.trim(); if(!v) return; logConsole('> ' + v); handleCommand(v); e.target.value = ''; } }
function handleCommand(cmd) {
  if(cmd === 'start') serverAction('start');
  else if(cmd === 'stop') serverAction('stop');
  else if(cmd === 'status') logConsole('Server status: ' + state.server.status);
  else if(cmd === 'plugins') logConsole('Plugins: ' + Object.keys(state.plugins).join(', '));
  else logConsole('Unknown command');
}

// Server actions
function serverAction(action) {
  if(action === 'start') { state.server.status = 'online'; document.getElementById('serverStatus').textContent = 'online'; logConsole('Server started'); }
  if(action === 'stop') { state.server.status = 'offline'; document.getElementById('serverStatus').textContent = 'offline'; logConsole('Server stopped'); }
  if(action === 'restart') { logConsole('Restarting'); state.server.status = 'online'; document.getElementById('serverStatus').textContent = 'online'; }
  saveState();
}

// Files
let currentFile = null;
function openFile(name) { currentFile = name; document.getElementById('currentFile').textContent = name; const editor = document.getElementById('editor'); editor.textContent = state.files[name] || ''; }
function saveFile() { if(!currentFile) { alert('Select a file first'); return; } const editor = document.getElementById('editor'); state.files[currentFile] = editor.textContent; logConsole('File saved: ' + currentFile); saveState(); renderFiles(); }
function downloadFile() { if(!currentFile) { alert('Select a file first'); return; } const blob = new Blob([state.files[currentFile] || ''], { type: 'text/plain' }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = currentFile.replace(/\//g,'_'); document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url); }
function createFile() { const name = prompt('Nume fisier nou'); if(!name) return; state.files[name] = ''; openFile(name); saveState(); renderFiles(); }
function deleteFile() { if(!currentFile) return; if(!confirm('Delete ' + currentFile + '?')) return; delete state.files[currentFile]; currentFile = null; document.getElementById('currentFile').textContent = 'Niciun fisier selectat'; document.getElementById('editor').textContent = ''; renderFiles(); saveState(); }

function renderFiles() {
  const filesList = document.getElementById('filesList');
  filesList.innerHTML = '';
  Object.keys(state.files).forEach(k => {
    const el = document.createElement('div'); el.className = 'item'; el.textContent = k; el.onclick = () => openFile(k); filesList.appendChild(el);
  });
}

// Plugins
function renderPlugins() {
  const p = document.getElementById('pluginsPanel'); p.innerHTML = '';
  Object.keys(state.plugins).forEach(name => {
    const row = document.createElement('div'); row.className = 'pluginRow';
    const left = document.createElement('div'); left.innerHTML = '<strong>'+name+'</strong> <span class="note">v'+state.plugins[name].version+'</span>';
    const actions = document.createElement('div'); actions.className = 'pluginActions';
    const toggle = document.createElement('button'); toggle.className = 'btn'; toggle.textContent = state.plugins[name].enabled ? 'Disable' : 'Enable'; toggle.onclick = () => { state.plugins[name].enabled = !state.plugins[name].enabled; renderPlugins(); saveState(); };
    const del = document.createElement('button'); del.className = 'btn'; del.textContent = 'Remove'; del.onclick = () => { if(confirm('Remove ' + name + '?')) { delete state.plugins[name]; renderPlugins(); saveState(); } };
    actions.appendChild(toggle); actions.appendChild(del);
    row.appendChild(left); row.appendChild(actions); p.appendChild(row);
  });
}

function installPlugin() {
  const name = document.getElementById('uploadPluginInput').value.trim(); if(!name) return alert('Enter plugin name');
  state.plugins[name] = { enabled: true, version: '1.0.0' }; renderPlugins(); logConsole('Plugin installed: ' + name); saveState();
}
function scanPlugins() { renderPlugins(); logConsole('Plugin scan complete'); }

// Account and credits
function showAccount() { alert('User: ' + state.account.name + '\nCredits: ' + state.account.credits); }
function showCredits() { alert('Credits: ' + state.account.credits); }
function addCredits() { const v = parseInt(document.getElementById('addCreditsInput').value || '0',10); if(isNaN(v) || v <= 0) return alert('Invalid amount'); state.account.credits += v; document.getElementById('acctCredits').textContent = state.account.credits; logConsole('Added credits: ' + v); saveState(); }
function buyCredits() { const v = prompt('Buy credits amount'); const n = parseInt(v,10); if(isNaN(n) || n <= 0) return; state.account.credits += n; document.getElementById('acctCredits').textContent = state.account.credits; logConsole('Purchased credits: ' + n); saveState(); }

// Subdomains
function purchaseSubdomain() {
  const name = document.getElementById('subInput').value.trim(); if(!name) return alert('Enter name');
  const type = document.getElementById('subType').value;
  const ip = document.getElementById('subIp').value.trim(); if(!ip) return alert('Enter ip:port');
  const cost = 20 + (type === 'mc' ? 10 : 0);
  if(state.account.credits < cost) return alert('Not enough credits, cost: ' + cost);
  if(state.subdomains[name]) return alert('Subdomain already exists');
  state.account.credits -= cost;
  state.subdomains[name] = { type, target: ip, purchased: true, created: new Date().toISOString() };
  document.getElementById('acctCredits').textContent = state.account.credits;
  logConsole('Purchased subdomain: ' + name + ' as ' + (type === 'mc' ? 'mc.'+name+'.ro' : name+'.ro'));
  renderSubList();
  saveState();
}

function renderSubList() {
  const el = document.getElementById('subList'); el.innerHTML = '';
  Object.keys(state.subdomains).forEach(k => {
    const s = state.subdomains[k];
    const row = document.createElement('div'); row.style.display = 'flex'; row.style.justifyContent = 'space-between'; row.style.padding = '6px 0';
    const left = document.createElement('div'); left.textContent = (s.type === 'mc' ? 'mc.'+k+'.ro' : k+'.ro') + ' -> ' + s.target;
    const right = document.createElement('div');
    const btn = document.createElement('button'); btn.className = 'btn'; btn.textContent = 'Edit'; btn.onclick = () => { const newip = prompt('Target ip:port', s.target); if(newip) { s.target = newip; saveState(); renderSubList(); logConsole('Updated mapping for ' + k); } };
    const del = document.createElement('button'); del.className = 'btn'; del.textContent = 'Remove'; del.onclick = () => { if(confirm('Remove ' + k + '?')) { delete state.subdomains[k]; saveState(); renderSubList(); } };
    right.appendChild(btn); right.appendChild(del);
    row.appendChild(left); row.appendChild(right); el.appendChild(row);
  });
}

function openSubdomainManager() { alert('Open subdomain manager in main panel'); }
function openMapping() { alert('Map ip or change port from subdomain manager'); }
function viewMappings() { alert('Mappings count: ' + Object.keys(state.subdomains).length); }

// Backups, scheduler, logs
function openBackup() { alert('Backups: ' + Object.keys(state.files).length + ' files saved'); }
function openScheduler() { alert('Scheduler opened'); }
function openLogs() { alert('Logs open'); }
function openHelp() { alert('Help: This is a local demo panel. Actions are simulated.'); }

// load or seed initial state
loadState(); if(!Object.keys(state.files).length) seed(); renderFiles(); renderPlugins(); renderSubList(); document.getElementById('acctCredits').textContent = state.account.credits;

// Expose some developer helpers
window.state = state;

</script>
</body>
</html>
